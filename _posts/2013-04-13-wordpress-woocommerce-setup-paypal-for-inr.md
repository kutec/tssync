---
ID: 1618
post_title: 'WordPress WooCommerce &#8211; Setup PAYPAL for INR'
author: Rishi Mehta
post_date: 2013-04-13 12:05:28
post_excerpt: ""
layout: post
permalink: >
  http://teckstack.com/wordpress-woocommerce-setup-paypal-for-inr
published: true
networkpub_postmessage:
  - ""
networkpub_postsummary:
  - ""
networkpub_twitterhandle:
  - ""
networkpub_twitterhash:
  - ""
networkpub_ogtype_facebook:
  - ""
networkpub_post_image_video:
  - ""
disclosure_dropdown:
  - None
better-related-:
  - 'a:6:{s:6:"offset";i:10000;s:5:"stime";d:1365880267.3152849674224853515625;s:7:"queries";i:11;i:1618;a:43:{i:1590;d:218.21284221780712186955497600138187408447265625;i:1559;d:18.21495819091796875;i:1519;d:259.062058279401071558822877705097198486328125;i:1352;d:57.6079559326171875;i:1323;d:204.170001584054915610977332107722759246826171875;i:206;d:189.3275909423828125;i:1197;d:220.422198849679915610977332107722759246826171875;i:1104;d:55.904132843017578125;i:970;d:201.77459716796875;i:937;d:210.7928466796875;i:912;d:189.026034909250228110977332107722759246826171875;i:893;d:193.8168182373046875;i:874;d:93.4440739072602326587002607993781566619873046875;i:846;d:201.17587017190868436955497600138187408447265625;i:792;d:176.629974365234375;i:774;d:211.432226504919668741422356106340885162353515625;i:731;d:186.795166015625;i:638;d:223.578141043072974980532308109104633331298828125;i:641;d:137.5609588623046875;i:439;d:181.9732818603515625;i:401;d:181.25694011819774686955497600138187408447265625;i:340;d:226.29331707132274686955497600138187408447265625;i:200;d:176.3503570556640625;i:263;d:79.99581146240234375;i:256;d:52.307926177978515625;i:240;d:66.337066650390625;i:220;d:132.6136932373046875;i:193;d:47.7770538330078125;i:181;d:61.58054693317598804469525930471718311309814453125;i:165;d:26.4954376220703125;i:154;d:15.38977146148681640625;i:146;d:37.389225006103515625;i:141;d:50.53336334228515625;i:134;d:41.62212371826171875;i:126;d:35.962921142578125;i:111;d:15.43677997589111328125;i:99;d:5.191984653472900390625;i:88;d:28.7470798492431640625;i:82;d:25.8913116455078125;i:78;d:24.2327022552490234375;i:48;d:33.66858133280052101099499850533902645111083984375;i:42;d:2.4766123294830322265625;i:24;d:110.1600341796875;}s:5:"etime";d:1365880267.3785870075225830078125;s:5:"ctime";i:1365880267;}'
disclosure_position:
  - Above the Content
dsq_thread_id:
  - "1207892381"
authorsure_hide_author_box:
  - ""
authorsure_include_css:
  - ""
quality_blog_tip_done1:
  - 'no'
quality_blog_tip_done2:
  - 'no'
quality_blog_tip_done3:
  - 'no'
quality_blog_tip_done4:
  - 'no'
quality_blog_tip_done5:
  - 'no'
quality_blog_tip_done6:
  - 'no'
quality_blog_tip_done7:
  - 'no'
quality_blog_tip_done8:
  - 'no'
quality_blog_tip_done9:
  - 'no'
quality_blog_tip_done10:
  - 'no'
quality_blog_tip_done11:
  - 'no'
quality_blog_tip_done12:
  - 'no'
quality_blog_tip_done13:
  - 'no'
quality_blog_tip_done14:
  - 'no'
quality_blog_tip_done15:
  - 'no'
quality_blog_tip_done16:
  - 'no'
quality_blog_tip_done17:
  - 'no'
quality_blog_tip_done18:
  - 'no'
quality_blog_tip_done19:
  - 'no'
quality_blog_tip_done20:
  - 'no'
quality_blog_tip_done21:
  - 'no'
quality_blog_tip_done22:
  - 'no'
quality_blog_tip_done23:
  - 'no'
quality_blog_tip_done24:
  - 'no'
quality_blog_tip_done25:
  - 'no'
factory_shortcodes_assets:
  - 'a:0:{}'
views:
  - "4034"
ac_is_copyprotect:
  - "1"
ac_is_advanced_tracking:
  - "1"
ac_postid:
  - 0jW-squaIzR.text
ac_is_process:
  - "1"
ac_embedid:
  - 6ZzXCl6shil
vortex_system_likes:
  - "0"
vortex_system_dislikes:
  - "0"
---
<blockquote><a title="WordPress" href="https://wordpress.org/" target="_blank">WordPress</a> is very popular CMS and to enhance its functionality to the level of <a title="E-commerce" href="http://en.wikipedia.org/wiki/E-commerce" target="_blank" rel="wikipedia">eCommerce</a>, <a title="WooCommerce - eCommerce Plugin for WordPress" href="http://www.woothemes.com/woocommerce/" target="_blank">WooCommerce</a> has done a great job by creating plugin.

Today I am going to talk about <strong>WordPress WooCommerce - Setup PAYPAL for INR </strong>(instead of USD). Most of eCommerce developers know that <a title="Paypal" href="https://www.paypal.com/in/webapps/mpp/home" target="_blank">Paypal</a> is most common medium for online transaction now and it provides only few currency support as a part of standard. And that makes a big STOP for Indian users to use Paypal.</blockquote>
<h2>I Was Stuck At</h2>
One of my client from <a class="zem_slink" title="India" href="http://en.wikipedia.org/wiki/India" target="_blank" rel="wikipedia">India</a> wanted to <a title="Rcreators - Create Online Shopping Cart within 2 Months" href="http://rcreators.com" target="_blank">create an eCommerce Website</a> and the need was quiet simple in just couple of words, the currency transaction should be in <a class="zem_slink" title="Indian rupee" href="http://en.wikipedia.org/wiki/Indian_rupee" target="_blank" rel="wikipedia">Indian Rupees</a> (INR) and Paypal would be the mediator. As the entire project going to target India only.

I go to Paypal developer <a class="zem_slink" title="Application programming interface" href="http://en.wikipedia.org/wiki/Application_programming_interface" target="_blank" rel="wikipedia">API</a> and tested some default code. That worked fine with the $. Then I changed the currency setting in WooCommerce to <strong>INR</strong> then tested it for Paypal and it has started giving error "<strong><em><a class="zem_slink" title="PayPal" href="http://en.wikipedia.org/wiki/PayPal" target="_blank" rel="wikipedia">Paypal</a> disabled</em>, your currency not supported by Paypal</strong>". I stuck. Then I had Googled a lot and finally got solution for this.
<h2>The Problem</h2>
After long search I found that Paypal is not supporting the Indian Rupees as currency and I need to  change currency from INR to USD when some order placed to eCommerce website and then send it to Paypal for transaction to be done. I found some solution on tech blogs but almost all about symbol conversion none of them said about <a class="zem_slink" title="Exchange rate" href="http://en.wikipedia.org/wiki/Exchange_rate" target="_blank" rel="wikipedia">currency conversion</a>.
<h2>The Solution</h2>
<h4>Steps</h4>
<ol>
	<li>Go to <strong>theme</strong> folder</li>
	<li>Open <strong>function.php</strong> file and paste in #<strong>4</strong>. <em>Other way is to create a new file as a HOOK and <strong>include it in function.php</strong>. </em>2nd one is advisable as if you change/edit theme's function.php file then it would revert back at the time of update.</li>
	<li><em>Checking in WooCommerce Currency Settings whether your desired currency is available or not.</em></li>
	<li>IF NOT add the code OR skip this step.
<pre class="prettyprint lang-php">add_filter( 'woocommerce_currencies', 'inr_currency' );

function inr_currency( $currencies ) {
	$currencies['INR'] = __( 'Indian Currency', 'woocommerce' );
	return $currencies;
}

add_filter('woocommerce_currency_symbol', 'inr_currency_symbol', 10, 2);

function inr_currency_symbol( $currency_symbol, $currency ) {
	switch( $currency ) {
	case 'INR': $currency_symbol = '₹'; break;
 //Need to add Rupees Symbol <strong>font</strong> to show INR symbol instead of SQUARE symbol
}
return $currency_symbol;</pre>
</li>
	<li>Above code will add INR and its symbol in WooCommerce currency list. So now INR can be selected from backed settings.</li>
	<li>Now as Paypal is not supporting this currency, WooCommerce wont includeINR as valid currency for transactions. So we need to add validation in WooCommercePaypal configuration. now this things to add inwoocommerce plugin file. we are editing a core file ofwoocommerce for this. please add your currency in array at line 77 in file plugin/woocommerce/classes/gateways/paypal/class-wc-gateway-paypal.php
<pre class="prettyprint lang-php">function is_valid_for_use() {
        if ( ! in_array( get_woocommerce_currency(), apply_filters( 'woocommerce_paypal_supported_currencies', array( 'AUD', 'BRL', 'CAD', 'MXN', 'NZD', 'HKD', 'SGD', 'USD', 'EUR', 'JPY', 'TRY', 'NOK', 'CZK', 'DKK', 'HUF', 'ILS', 'MYR', 'PHP', 'PLN', 'SEK', 'CHF', 'TWD', 'THB', 'GBP', 'RMB', 'INR' ) ) ) ) return false;

        return true;
    }</pre>
</li>
	<li>After adding above code now you can do transaction via Paypal by adding account details. But wait still it's not done. We have just fixed for WooCommerce plugin yet and the second phase for Paypal still remains. Means as discussed above that Paypal doesn't accept INR as currency if you buy something for <strong>INR 1000</strong> Paypal consider as<strong> USD 1000 </strong>and you are enough smarter to understand, ti's wrong and need to be fixed up. Don't worry here is the solution that I found by adding one more filter. THIS FILTER WILL CONVERT <strong>INR TO USD </strong>before sending them toPaypal.
<pre class="prettyprint lang-php">function convert_inr_to_usd($paypal_args){

	if ( $paypal_args['currency_code'] == 'INR'){
		$convert_rate = get_exchange_rate(); 
		//Set converting rate getting call back function
		$count = 1;

		while( isset($paypal_args['amount_' . $count]) ){
			$paypal_args['amount_' . $count] = round( $paypal_args['amount_' . $count] / $convert_rate, 2);
			$count++;
		}
	}
	return $paypal_args;
}
add_filter('woocommerce_paypal_args', 'convert_inr_to_usd');</pre>
</li>
	<li>Above code will convert INR to USD at the rate what you have mentioned and currency rates are changeable property on daily basis. So I integrated <a class="zem_slink" title="NASDAQ: GOOG" href="http://www.google.com/finance?q=NASDAQ:GOOG" target="_blank" rel="googlefinance">Google</a> Exchange Rates for automated process for currency rates. Now it will update the exchange rate value directly from Google convert it. Code will get currency rate and give it to our <strong>main function</strong>. so we will get full automated currency conversion functionality for Paypal at single place.<strong>Code is Updated after igoogle retired.</strong>To work with Below code, you need to register for your app_id : https://openexchangerates.org/signup/free
<pre class="prettyprint lang-php">function get_exchange_rate() {
	$file = 'latest.json';
$appId = 'Your_APP_ID';

// Open CURL session:
$ch = curl_init("http://openexchangerates.org/api/$file?app_id=$appId");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

// Get the data:
$json = curl_exec($ch);
curl_close($ch);

// Decode JSON response:
$exchangeRates = json_decode($json);

// Returning Value:
return $exchangeRates-&gt;rates-&gt;INR;
}</pre>
</li>
</ol>
<div></div>
You can use it for your own currency also, just replace currency name and symbol. you can also change conversion to euro instead of USD. just change USD code with EURO code in above code.